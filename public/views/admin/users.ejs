<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>유저 관리</title>
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  <div style="max-width:1100px;margin:40px auto;padding:24px;">
    <h1 style="font-size:28px;font-weight:900;letter-spacing:-1px;">유저 관리</h1>

    <div style="margin:14px 0;display:flex;gap:10px;flex-wrap:wrap;">
      <a href="/admin" style="font-weight:800;color:#1a4bd9;text-decoration:none;">← 관리자 메인</a>
      <a href="/logout" style="font-weight:800;color:#1a4bd9;text-decoration:none;">로그아웃</a>
    </div>

    <table style="width:100%;border-collapse:collapse;background:#fff;border:1px solid #ddd;">
      <thead>
        <tr style="background:#f7fbff;">
          <th style="padding:10px;border-bottom:1px solid #ddd;">ID</th>
          <th style="padding:10px;border-bottom:1px solid #ddd;">고유번호</th>
          <th style="padding:10px;border-bottom:1px solid #ddd;">닉네임</th>
          <th style="padding:10px;border-bottom:1px solid #ddd;">아이디</th>
          <th style="padding:10px;border-bottom:1px solid #ddd;">권한</th>
          <th style="padding:10px;border-bottom:1px solid #ddd;">변경</th>
        </tr>
      </thead>
      <tbody>
        <% (users || []).forEach(u => { %>
          <tr>
            <td style="padding:10px;border-bottom:1px solid #eee;"><%= u.id %></td>
            <td style="padding:10px;border-bottom:1px solid #eee;"><%= u.uniqueCode %></td>
            <td style="padding:10px;border-bottom:1px solid #eee;"><%= u.nickname %></td>
            <td style="padding:10px;border-bottom:1px solid #eee;"><%= u.username %></td>
            <td style="padding:10px;border-bottom:1px solid #eee;"><b><%= u.role %></b></td>
            <td style="padding:10px;border-bottom:1px solid #eee;">
              <form method="POST" action="/admin/users/<%= u.id %>/role" style="display:flex;gap:8px;align-items:center;">
                <select name="role" style="padding:8px;border-radius:10px;border:1px solid #ccc;">
                  <option value="user" <%= u.role === 'user' ? 'selected' : '' %>>user</option>
                  <option value="admin" <%= u.role === 'admin' ? 'selected' : '' %>>admin</option>
                </select>
                <button type="submit" style="padding:8px 12px;border:none;border-radius:10px;background:#1a4bd9;color:#fff;font-weight:900;">
                  저장
                </button>
              </form>
            </td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</body>
</html>
